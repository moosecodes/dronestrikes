<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

    var request = $.ajax({
        url: 'http://api.dronestre.am/data',
        // data: myData,
        type: 'GET',
        crossDomain: true,
        dataType: 'jsonp',
        success: function(results) { buildStrikeTable(results.strike); },
        error: function() { alert('Failed!'); },
        // beforeSend: setHeader
    });

    $.when(request).done( function(){
      initialize();
    });

    var strikeTable = [];

    function buildStrikeTable(strikes) {
      strikes.map(function(strike){

        // if ( "Pakistan" == strike.country && 2015 <= new Date(strike.date).getFullYear() ) {
        // if ( "Pakistan" == strike.country ) {
        if ( true ) {

          $('#information').append('<p style="color:red;">' + new Date(strike.date).getFullYear() + ' - ' + strike.location + ', ' + strike.country + '</p>');
          $('#information').append('<p style="color:blue;">' + strike.narrative + '</p>');

         strikeTable.push([parseFloat(strike.lat), parseFloat(strike.lon), strike.location]);
        }
      });
    }

    function initialize() {

      google.charts.load('upcoming', {'packages':['geochart']});
      google.charts.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {

        var data = new google.visualization.DataTable();
            data.addColumn('number', 'Latitude');
            data.addColumn('number', 'Longitude');
            data.addColumn('string', 'Label');

            data.addRows(strikeTable);

        var options = {
          // region: '145',
          region: 'world',
          displayMode: 'markers',
          colorAxis: {colors: ['green', 'blue']}
        };

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

        chart.draw(data, options);
      }

    }
    </script>
  </head>
  <body>
    <div id="regions_div" style="width: 900px; height: 500px; float: left;"></div>
    <div id="information" style="width: 500px; height: 500px; float: left;"></div>
  </body>
</html>